_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[54],{"9Jhr":function(n,t,e){"use strict";e.d(t,"a",(function(){return h}));var r=e("ERkP"),i=e.n(r),a=e("O94r"),o=e.n(a),c=e("1Wmu"),s=e("dGDr");function u(){return(u=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n}).apply(this,arguments)}function h(n){var t=n.x,e=n.x0,r=n.x1,a=n.y,h=n.y1,l=n.y0,f=n.yScale,d=n.data,g=void 0===d?[]:d,p=n.defined,m=void 0===p?function(){return!0}:p,x=n.className,b=n.curve,y=n.innerRef,v=n.children,_=function(n,t){if(null==n)return{};var e,r,i={},a=Object.keys(n);for(r=0;r<a.length;r++)e=a[r],t.indexOf(e)>=0||(i[e]=n[e]);return i}(n,["x","x0","x1","y","y1","y0","yScale","data","defined","className","curve","innerRef","children"]),k=Object(s.b)({x:t,x0:e,x1:r,defined:m,curve:b});return l?Object(c.a)(k.y0,l):k.y0(f.range()[0]),a&&!h&&Object(c.a)(k.y1,a),h&&!a&&Object(c.a)(k.y1,h),v?i.a.createElement(i.a.Fragment,null,v({path:k})):i.a.createElement("path",u({ref:y,className:o()("visx-area-closed",x),d:k(g)||""},_))}},EbDF:function(n,t,e){"use strict";function r(n){return n<0?-1:1}function i(n,t,e){var i=n._x1-n._x0,a=t-n._x1,o=(n._y1-n._y0)/(i||a<0&&-0),c=(e-n._y1)/(a||i<0&&-0),s=(o*a+c*i)/(i+a);return(r(o)+r(c))*Math.min(Math.abs(o),Math.abs(c),.5*Math.abs(s))||0}function a(n,t){var e=n._x1-n._x0;return e?(3*(n._y1-n._y0)/e-t)/2:t}function o(n,t,e){var r=n._x0,i=n._y0,a=n._x1,o=n._y1,c=(a-r)/3;n._context.bezierCurveTo(r+c,i+c*t,a-c,o-c*e,a,o)}function c(n){this._context=n}function s(n){this._context=new u(n)}function u(n){this._context=n}function h(n){return new c(n)}function l(n){return new s(n)}e.d(t,"a",(function(){return h})),e.d(t,"b",(function(){return l})),c.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:o(this,this._t0,a(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(n,t){var e=NaN;if(t=+t,(n=+n)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(n,t):this._context.moveTo(n,t);break;case 1:this._point=2;break;case 2:this._point=3,o(this,a(this,e=i(this,n,t)),e);break;default:o(this,this._t0,e=i(this,n,t))}this._x0=this._x1,this._x1=n,this._y0=this._y1,this._y1=t,this._t0=e}}},(s.prototype=Object.create(c.prototype)).point=function(n,t){c.prototype.point.call(this,t,n)},u.prototype={moveTo:function(n,t){this._context.moveTo(t,n)},closePath:function(){this._context.closePath()},lineTo:function(n,t){this._context.lineTo(t,n)},bezierCurveTo:function(n,t,e,r,i,a){this._context.bezierCurveTo(t,n,r,e,a,i)}}},OfPM:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/brush",function(){return e("pRTK")}])},"VB+g":function(n,t,e){"use strict";e.d(t,"a",(function(){return c}));var r=e("rkTo"),i=e("ZQHj");function a(){return(a=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n}).apply(this,arguments)}var o={x:0,y:0};function c(n,t){if(!n||!t)return null;var e=function(n){return n?Object(i.f)(n)?n.changedTouches.length>0?{x:n.changedTouches[0].clientX,y:n.changedTouches[0].clientY}:a({},o):{x:n.clientX,y:n.clientY}:a({},o)}(t),c=Object(i.c)(n)?n.ownerSVGElement:n,s=Object(i.d)(c)?c.getScreenCTM():null;if(Object(i.e)(c)&&s){var u=c.createSVGPoint();return u.x=e.x,u.y=e.y,u=u.matrixTransform(s.inverse()),new r.a({x:u.x,y:u.y})}var h=n.getBoundingClientRect();return new r.a({x:e.x-h.left-n.clientLeft,y:e.y-h.top-n.clientTop})}},VFFr:function(n,t,e){"use strict";e.d(t,"a",(function(){return c}));var r=e("aWzz"),i=e.n(r),a=e("ERkP"),o=e.n(a);function c(n){var t=n.id,e=n.width,r=n.height,i=n.children;return o.a.createElement("defs",null,o.a.createElement("pattern",{id:t,width:e,height:r,patternUnits:"userSpaceOnUse"},i))}c.propTypes={id:i.a.string.isRequired,width:i.a.number.isRequired,height:i.a.number.isRequired,children:i.a.node.isRequired}},ZQHj:function(n,t,e){"use strict";function r(n){return!!n&&n instanceof Element}function i(n){return!!n&&(n instanceof SVGElement||"ownerSVGElement"in n)}function a(n){return!!n&&"createSVGPoint"in n}function o(n){return!!n&&"getScreenCTM"in n}function c(n){return!!n&&"changedTouches"in n}function s(n){return!!n&&(n instanceof Event||"nativeEvent"in n&&n.nativeEvent instanceof Event)}e.d(t,"a",(function(){return r})),e.d(t,"c",(function(){return i})),e.d(t,"e",(function(){return a})),e.d(t,"d",(function(){return o})),e.d(t,"f",(function(){return c})),e.d(t,"b",(function(){return s}))},a49c:function(n,t,e){"use strict";e.d(t,"a",(function(){return p}));var r=e("aWzz"),i=e.n(r),a=e("ERkP"),o=e.n(a),c=e("O94r"),s=e.n(c),u=e("VFFr"),h="horizontal",l="vertical",f="diagonal",d="diagonalRightToLeft";function g(n){var t=n.height;switch(n.orientation){case h:return"M 0,"+t/2+" l "+t+",0";case f:return"M 0,"+t+" l "+t+","+-t+" M "+-t/4+","+t/4+" l "+t/2+","+-t/2+"\n             M "+3/4*t+","+5/4*t+" l "+t/2+","+-t/2;case d:return"M 0,0 l "+t+","+t+"\n        M "+-t/4+","+3/4*t+" l "+t/2+","+t/2+"\n        M "+3/4*t+","+-t/4+" l "+t/2+","+t/2;case l:default:return"M "+t/2+", 0 l 0, "+t}}function p(n){var t=n.id,e=n.width,r=n.height,i=n.stroke,a=n.strokeWidth,c=n.strokeDasharray,h=n.strokeLinecap,l=void 0===h?"square":h,f=n.shapeRendering,d=void 0===f?"auto":f,p=n.orientation,m=void 0===p?["vertical"]:p,x=n.background,b=n.className,y=Array.isArray(m)?m:[m];return o.a.createElement(u.a,{id:t,width:e,height:r},!!x&&o.a.createElement("rect",{className:s()("visx-pattern-line-background"),width:e,height:r,fill:x}),y.map((function(n,e){return o.a.createElement("path",{key:"visx-"+t+"-line-"+n+"-"+e,className:s()("visx-pattern-line",b),d:g({orientation:n,height:r}),stroke:i,strokeWidth:a,strokeDasharray:c,strokeLinecap:l,shapeRendering:d})})))}p.propTypes={id:i.a.string.isRequired,width:i.a.number.isRequired,height:i.a.number.isRequired,className:i.a.string,background:i.a.string,stroke:i.a.string,strokeWidth:i.a.oneOfType([i.a.number,i.a.string]),strokeDasharray:i.a.oneOfType([i.a.string,i.a.number]),strokeLinecap:i.a.oneOf(["square","butt","round","inherit"]),shapeRendering:i.a.oneOfType([i.a.string,i.a.number]),orientation:i.a.array}},g2fB:function(n,t,e){"use strict";e.d(t,"a",(function(){return s}));var r=e("ERkP"),i=e.n(r),a=e("O94r"),o=e.n(a);function c(){return(c=Object.assign||function(n){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r])}return n}).apply(this,arguments)}function s(n){var t=n.className,e=n.innerRef,r=function(n,t){if(null==n)return{};var e,r,i={},a=Object.keys(n);for(r=0;r<a.length;r++)e=a[r],t.indexOf(e)>=0||(i[e]=n[e]);return i}(n,["className","innerRef"]);return i.a.createElement("rect",c({ref:e,className:o()("visx-bar",t)},r))}},jpI8:function(n,t,e){"use strict";e.d(t,"a",(function(){return a}));var r=e("VB+g"),i=e("ZQHj");function a(n,t){if(Object(i.a)(n)&&t)return Object(r.a)(n,t);if(Object(i.b)(n)){var e=n,a=e.target;if(a)return Object(r.a)(a,e)}return null}},pRTK:function(n,t,e){"use strict";e.r(t);var r=e("ERkP"),i=e.n(r),a=e("6wy5"),o=e("Hn+V"),c=e("MrGM"),s=i.a.createElement;t.default=function(){return s(a.a,{component:o.c,title:"Brush",margin:{top:40,left:50,right:20,bottom:10},codeSandboxDirectoryName:"visx-brush",packageJson:c},"import React, { useState, useMemo } from 'react';\nimport { scaleTime, scaleLinear } from '@visx/scale';\nimport appleStock, { AppleStock } from '@visx/mock-data/lib/mocks/appleStock';\nimport { Brush } from '@visx/brush';\nimport { Bounds } from '@visx/brush/lib/types';\nimport { PatternLines } from '@visx/pattern';\nimport { LinearGradient } from '@visx/gradient';\nimport { max, extent } from 'd3-array';\n\nimport AreaChart from './AreaChart';\n\n// Initialize some variables\nconst stock = appleStock.slice(1000);\nconst brushMargin = { top: 10, bottom: 15, left: 50, right: 20 };\nconst chartSeparation = 30;\nconst PATTERN_ID = 'brush_pattern';\nconst GRADIENT_ID = 'brush_gradient';\nexport const accentColor = '#f6acc8';\nexport const background = '#584153';\nexport const background2 = '#af8baf';\nconst selectedBrushStyle = {\n  fill: `url(#${PATTERN_ID})`,\n  stroke: 'white',\n};\n\n// accessors\nconst getDate = (d: AppleStock) => new Date(d.date);\nconst getStockValue = (d: AppleStock) => d.close;\n\nexport type BrushProps = {\n  width: number;\n  height: number;\n  margin?: { top: number; right: number; bottom: number; left: number };\n  compact?: boolean;\n};\n\nfunction BrushChart({\n  compact = false,\n  width,\n  height,\n  margin = {\n    top: 20,\n    left: 50,\n    bottom: 20,\n    right: 20,\n  },\n}: BrushProps) {\n  const [filteredStock, setFilteredStock] = useState(stock);\n\n  const onBrushChange = (domain: Bounds | null) => {\n    if (!domain) return;\n    const { x0, x1, y0, y1 } = domain;\n    const stockCopy = stock.filter(s => {\n      const x = getDate(s).getTime();\n      const y = getStockValue(s);\n      return x > x0 && x < x1 && y > y0 && y < y1;\n    });\n    setFilteredStock(stockCopy);\n  };\n\n  const innerHeight = height - margin.top - margin.bottom;\n  const topChartBottomMargin = compact ? chartSeparation / 2 : chartSeparation + 10;\n  const topChartHeight = 0.8 * innerHeight - topChartBottomMargin;\n  const bottomChartHeight = innerHeight - topChartHeight - chartSeparation;\n\n  // bounds\n  const xMax = Math.max(width - margin.left - margin.right, 0);\n  const yMax = Math.max(topChartHeight, 0);\n  const xBrushMax = Math.max(width - brushMargin.left - brushMargin.right, 0);\n  const yBrushMax = Math.max(bottomChartHeight - brushMargin.top - brushMargin.bottom, 0);\n\n  // scales\n  const dateScale = useMemo(\n    () =>\n      scaleTime<number>({\n        range: [0, xMax],\n        domain: extent(filteredStock, getDate) as [Date, Date],\n      }),\n    [xMax, filteredStock],\n  );\n  const stockScale = useMemo(\n    () =>\n      scaleLinear<number>({\n        range: [yMax, 0],\n        domain: [0, max(filteredStock, getStockValue) || 0],\n        nice: true,\n      }),\n    [yMax, filteredStock],\n  );\n  const brushDateScale = useMemo(\n    () =>\n      scaleTime<number>({\n        range: [0, xBrushMax],\n        domain: extent(stock, getDate) as [Date, Date],\n      }),\n    [xBrushMax],\n  );\n  const brushStockScale = useMemo(\n    () =>\n      scaleLinear({\n        range: [yBrushMax, 0],\n        domain: [0, max(stock, getStockValue) || 0],\n        nice: true,\n      }),\n    [yBrushMax],\n  );\n\n  const initialBrushPosition = useMemo(\n    () => ({\n      start: { x: brushDateScale(getDate(stock[50])) },\n      end: { x: brushDateScale(getDate(stock[100])) },\n    }),\n    [brushDateScale],\n  );\n\n  return (\n    <div>\n      <svg width={width} height={height}>\n        <LinearGradient id={GRADIENT_ID} from={background} to={background2} rotate={45} />\n        <rect x={0} y={0} width={width} height={height} fill={`url(#${GRADIENT_ID})`} rx={14} />\n        <AreaChart\n          hideBottomAxis={compact}\n          data={filteredStock}\n          width={width}\n          margin={{ ...margin, bottom: topChartBottomMargin }}\n          yMax={yMax}\n          xScale={dateScale}\n          yScale={stockScale}\n          gradientColor={background2}\n        />\n        <AreaChart\n          hideBottomAxis\n          hideLeftAxis\n          data={stock}\n          width={width}\n          yMax={yBrushMax}\n          xScale={brushDateScale}\n          yScale={brushStockScale}\n          margin={brushMargin}\n          top={topChartHeight + topChartBottomMargin + margin.top}\n          gradientColor={background2}\n        >\n          <PatternLines\n            id={PATTERN_ID}\n            height={8}\n            width={8}\n            stroke={accentColor}\n            strokeWidth={1}\n            orientation={['diagonal']}\n          />\n          <Brush\n            xScale={brushDateScale}\n            yScale={brushStockScale}\n            width={xBrushMax}\n            height={yBrushMax}\n            margin={brushMargin}\n            handleSize={8}\n            resizeTriggerAreas={['left', 'right']}\n            brushDirection=\"horizontal\"\n            initialBrushPosition={initialBrushPosition}\n            onChange={onBrushChange}\n            onClick={() => setFilteredStock(stock)}\n            selectedBoxStyle={selectedBrushStyle}\n          />\n        </AreaChart>\n      </svg>\n    </div>\n  );\n}\n\nexport default BrushChart;\n")}},ue4z:function(n,t,e){"use strict";e.d(t,"a",(function(){return i})),e.d(t,"b",(function(){return o})),e.d(t,"c",(function(){return u})),e.d(t,"d",(function(){return h})),e.d(t,"e",(function(){return s})),e.d(t,"f",(function(){return l}));var r=function(n,t){return n<t?-1:n>t?1:n>=t?0:NaN},i=function(n){var t;return 1===n.length&&(t=n,n=function(n,e){return r(t(n),e)}),{left:function(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;n(t[a],e)<0?r=a+1:i=a}return r},right:function(t,e,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;n(t[a],e)>0?i=a:r=a+1}return r}}};var a=i(r);a.right,a.left;var o=function(n,t){var e,r,i,a=n.length,o=-1;if(null==t){for(;++o<a;)if(null!=(e=n[o])&&e>=e)for(r=i=e;++o<a;)null!=(e=n[o])&&(r>e&&(r=e),i<e&&(i=e))}else for(;++o<a;)if(null!=(e=t(n[o],o,n))&&e>=e)for(r=i=e;++o<a;)null!=(e=t(n[o],o,n))&&(r>e&&(r=e),i<e&&(i=e));return[r,i]},c=Array.prototype,s=(c.slice,c.map,function(n,t,e){n=+n,t=+t,e=(i=arguments.length)<2?(t=n,n=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((t-n)/e)),a=new Array(i);++r<i;)a[r]=n+r*e;return a});Math.sqrt(50),Math.sqrt(10),Math.sqrt(2);var u=function(n,t){var e,r,i=n.length,a=-1;if(null==t){for(;++a<i;)if(null!=(e=n[a])&&e>=e)for(r=e;++a<i;)null!=(e=n[a])&&e>r&&(r=e)}else for(;++a<i;)if(null!=(e=t(n[a],a,n))&&e>=e)for(r=e;++a<i;)null!=(e=t(n[a],a,n))&&e>r&&(r=e);return r},h=function(n){for(var t,e,r,i=n.length,a=-1,o=0;++a<i;)o+=n[a].length;for(e=new Array(o);--i>=0;)for(t=(r=n[i]).length;--t>=0;)e[--o]=r[t];return e},l=function(n){if(!(i=n.length))return[];for(var t=-1,e=function(n,t){var e,r,i=n.length,a=-1;if(null==t){for(;++a<i;)if(null!=(e=n[a])&&e>=e)for(r=e;++a<i;)null!=(e=n[a])&&r>e&&(r=e)}else for(;++a<i;)if(null!=(e=t(n[a],a,n))&&e>=e)for(r=e;++a<i;)null!=(e=t(n[a],a,n))&&r>e&&(r=e);return r}(n,f),r=new Array(e);++t<e;)for(var i,a=-1,o=r[t]=new Array(i);++a<i;)o[a]=n[a][t];return r};function f(n){return n.length}},zjfJ:function(n,t,e){"use strict";function r(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}e.d(t,"a",(function(){return r}))}},[["OfPM",0,2,1,3,4,5,6,7,11,12,15,17,40]]]);
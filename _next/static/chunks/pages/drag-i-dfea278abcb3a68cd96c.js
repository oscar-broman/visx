_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[93],{"/B0Q":function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"a",(function(){return i}));var r=t("W1cA");const a=Symbol("implicit");function i(){var e=new Map,n=[],t=[],o=a;function s(r){var i=r+"",s=e.get(i);if(!s){if(o!==a)return o;e.set(i,s=n.push(r))}return t[(s-1)%t.length]}return s.domain=function(t){if(!arguments.length)return n.slice();n=[],e=new Map;for(const r of t){const t=r+"";e.has(t)||e.set(t,n.push(r))}return s},s.range=function(e){return arguments.length?(t=Array.from(e),s):t.slice()},s.unknown=function(e){return arguments.length?(o=e,s):o},s.copy=function(){return i(n,t).unknown(o)},r.b.apply(s,arguments),s}},"9Hn9":function(e,n,t){"use strict";t.r(n);var r=t("ERkP"),a=t.n(r),i=t("6wy5"),o=t("w3y7"),s=t("wEgr"),c=a.a.createElement;n.default=function(){return c(i.a,{component:o.a,title:"Drag I",codeSandboxDirectoryName:"visx-drag-i",packageJson:s},"import React, { useMemo, useState, useEffect } from 'react';\nimport { scaleOrdinal } from '@visx/scale';\nimport { LinearGradient } from '@visx/gradient';\nimport { Drag, raise } from '@visx/drag';\nimport generateCircles, { Circle } from './generateCircles';\n\nconst colors = [\n  '#025aac',\n  '#02cff9',\n  '#02efff',\n  '#03aeed',\n  '#0384d7',\n  '#edfdff',\n  '#ab31ff',\n  '#5924d7',\n  '#d145ff',\n  '#1a02b1',\n  '#e582ff',\n  '#ff00d4',\n  '#270eff',\n  '#827ce2',\n];\n\nexport type DragIProps = {\n  width: number;\n  height: number;\n};\n\nexport default function DragI({ width, height }: DragIProps) {\n  const [draggingItems, setDraggingItems] = useState<Circle[]>([]);\n\n  useEffect(() => {\n    if (width > 10 && height > 10) setDraggingItems(generateCircles({ width, height }));\n  }, [width, height]);\n\n  const colorScale = useMemo(\n    () =>\n      scaleOrdinal({\n        range: colors,\n        domain: draggingItems.map(d => d.id),\n      }),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [width, height],\n  );\n\n  if (draggingItems.length === 0 || width < 10) return null;\n\n  return (\n    <div className=\"Drag\" style={{ touchAction: 'none' }}>\n      <svg width={width} height={height}>\n        <LinearGradient id=\"stroke\" from=\"#ff00a5\" to=\"#ffc500\" />\n        <rect fill=\"#c4c3cb\" width={width} height={height} rx={14} />\n\n        {draggingItems.map((d, i) => (\n          <Drag\n            key={`${d.id}`}\n            width={width}\n            height={height}\n            onDragStart={() => {\n              // svg follows the painter model\n              // so we need to move the data item\n              // to end of the array for it to be drawn\n              // \"on top of\" the other data items\n              setDraggingItems(raise(draggingItems, i));\n            }}\n          >\n            {({ dragStart, dragEnd, dragMove, isDragging, dx, dy }) =>\n              (false && isDragging && console.log(d.id, d.x, dx)) || (\n                <circle\n                  key={`dot-${d.id}`}\n                  cx={d.x}\n                  cy={d.y}\n                  r={isDragging ? d.radius + 4 : d.radius}\n                  fill={isDragging ? 'url(#stroke)' : colorScale(d.id)}\n                  transform={`translate(${dx}, ${dy})`}\n                  fillOpacity={0.9}\n                  stroke={isDragging ? 'white' : 'transparent'}\n                  strokeWidth={2}\n                  onMouseMove={dragMove}\n                  onMouseUp={dragEnd}\n                  onMouseDown={dragStart}\n                  onTouchStart={dragStart}\n                  onTouchMove={dragMove}\n                  onTouchEnd={dragEnd}\n                />\n              )\n            }\n          </Drag>\n        ))}\n      </svg>\n      <div className=\"deets\">\n        <div>\n          Based on Mike Bostock's{' '}\n          <a href=\"https://bl.ocks.org/mbostock/c206c20294258c18832ff80d8fd395c3\">\n            Circle Dragging II\n          </a>\n        </div>\n      </div>\n\n      <style jsx>{`\n        .Drag {\n          display: flex;\n          flex-direction: column;\n          user-select: none;\n        }\n\n        svg {\n          margin: 1rem 0;\n        }\n        .deets {\n          display: flex;\n          flex-direction: row;\n          font-size: 12px;\n        }\n        .deets > div {\n          margin: 0.25rem;\n        }\n      `}</style>\n    </div>\n  );\n}\n")}},"Cf/J":function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var r=t("aWzz"),a=t.n(r),i=t("ERkP"),o=t.n(i);function s(){return(s=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function c(e){var n=e.children,t=e.id,r=e.from,a=e.to,i=e.x1,c=e.y1,d=e.x2,u=e.y2,f=e.fromOffset,l=void 0===f?"0%":f,g=e.fromOpacity,p=void 0===g?1:g,h=e.toOffset,m=void 0===h?"100%":h,y=e.toOpacity,x=void 0===y?1:y,v=e.rotate,b=e.transform,w=e.vertical,O=void 0===w||w,E=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,["children","id","from","to","x1","y1","x2","y2","fromOffset","fromOpacity","toOffset","toOpacity","rotate","transform","vertical"]),D=i,S=d,j=c,k=u;return!O||D||S||j||k||(D="0",S="0",j="0",k="1"),o.a.createElement("defs",null,o.a.createElement("linearGradient",s({id:t,x1:D,y1:j,x2:S,y2:k,gradientTransform:v?"rotate("+v+")":b},E),!!n&&n,!n&&o.a.createElement("stop",{offset:l,stopColor:r,stopOpacity:p}),!n&&o.a.createElement("stop",{offset:m,stopColor:a,stopOpacity:x})))}c.propTypes={id:a.a.string.isRequired,from:a.a.string,to:a.a.string,x1:a.a.oneOfType([a.a.string,a.a.number]),x2:a.a.oneOfType([a.a.string,a.a.number]),y1:a.a.oneOfType([a.a.string,a.a.number]),y2:a.a.oneOfType([a.a.string,a.a.number]),fromOffset:a.a.oneOfType([a.a.string,a.a.number]),fromOpacity:a.a.oneOfType([a.a.string,a.a.number]),toOffset:a.a.oneOfType([a.a.string,a.a.number]),toOpacity:a.a.oneOfType([a.a.string,a.a.number]),rotate:a.a.oneOfType([a.a.string,a.a.number]),transform:a.a.string,children:a.a.node,vertical:a.a.bool}},"D+es":function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var r=t("/B0Q"),a=t("xx0A"),i=Object(a.b)("domain","range","reverse","unknown");function o(e){return i(Object(r.a)(),e)}},"VB+g":function(e,n,t){"use strict";t.d(n,"a",(function(){return s}));var r=t("rkTo"),a=t("ZQHj");function i(){return(i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var o={x:0,y:0};function s(e,n){if(!e||!n)return null;var t=function(e){return e?Object(a.f)(e)?e.changedTouches.length>0?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:i({},o):{x:e.clientX,y:e.clientY}:i({},o)}(n),s=Object(a.c)(e)?e.ownerSVGElement:e,c=Object(a.d)(s)?s.getScreenCTM():null;if(Object(a.e)(s)&&c){var d=s.createSVGPoint();return d.x=t.x,d.y=t.y,d=d.matrixTransform(c.inverse()),new r.a({x:d.x,y:d.y})}var u=e.getBoundingClientRect();return new r.a({x:t.x-u.left-e.clientLeft,y:t.y-u.top-e.clientTop})}},ZQHj:function(e,n,t){"use strict";function r(e){return!!e&&e instanceof Element}function a(e){return!!e&&(e instanceof SVGElement||"ownerSVGElement"in e)}function i(e){return!!e&&"createSVGPoint"in e}function o(e){return!!e&&"getScreenCTM"in e}function s(e){return!!e&&"changedTouches"in e}function c(e){return!!e&&(e instanceof Event||"nativeEvent"in e&&e.nativeEvent instanceof Event)}t.d(n,"a",(function(){return r})),t.d(n,"c",(function(){return a})),t.d(n,"e",(function(){return i})),t.d(n,"d",(function(){return o})),t.d(n,"f",(function(){return s})),t.d(n,"b",(function(){return c}))},cJAf:function(e,n,t){"use strict";t.d(n,"a",(function(){return f}));var r=t("aWzz"),a=t.n(r),i=t("ERkP"),o=t.n(i),s=t("jpI8");function c(){return(c=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var f=function(e){var n,t;function r(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return u(d(n=e.call.apply(e,[this].concat(r))||this),"state",{x:void 0,y:void 0,dx:0,dy:0,isDragging:!1}),u(d(n),"handleDragStart",(function(e){var t=n.props,r=t.onDragStart,a=t.resetOnStart;e.persist(),n.setState((function(n){var t=n.dx,r=n.dy,i=Object(s.a)(e)||{x:0,y:0};return{isDragging:!0,dx:a?0:t,dy:a?0:r,x:a?i.x:i.x-t,y:a?i.y:i.y-r}}),r&&function(){r(c({},n.state,{event:e}))})})),u(d(n),"handleDragMove",(function(e){var t=n.props.onDragMove;e.persist(),n.setState((function(n){var t=n.x,r=n.y,a=n.isDragging,i=Object(s.a)(e)||{x:0,y:0};return a?{isDragging:!0,dx:i.x-(t||0),dy:i.y-(r||0)}:null}),t&&function(){n.state.isDragging&&t(c({},n.state,{event:e}))})})),u(d(n),"handleDragEnd",(function(e){var t=n.props.onDragEnd;e.persist(),n.setState({isDragging:!1},t&&function(){t(c({},n.state,{event:e}))})})),n}return t=e,(n=r).prototype=Object.create(t.prototype),n.prototype.constructor=n,n.__proto__=t,r.prototype.render=function(){var e=this.state,n=e.x,t=e.y,r=e.dx,a=e.dy,i=e.isDragging,s=this.props,c=s.children,d=s.width,u=s.height,f=s.captureDragArea;return o.a.createElement(o.a.Fragment,null,i&&f&&o.a.createElement("rect",{width:d,height:u,onMouseMove:this.handleDragMove,onMouseUp:this.handleDragEnd,fill:"transparent"}),c({x:n,y:t,dx:r,dy:a,isDragging:i,dragEnd:this.handleDragEnd,dragMove:this.handleDragMove,dragStart:this.handleDragStart}))},r}(o.a.Component);u(f,"propTypes",{children:a.a.func.isRequired,width:a.a.number.isRequired,height:a.a.number.isRequired,captureDragArea:a.a.bool,resetOnStart:a.a.bool,onDragEnd:a.a.func,onDragMove:a.a.func,onDragStart:a.a.func}),u(f,"defaultProps",{captureDragArea:!0,resetOnStart:!1})},jpI8:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var r=t("VB+g"),a=t("ZQHj");function i(e,n){if(Object(a.a)(e)&&n)return Object(r.a)(e,n);if(Object(a.b)(e)){var t=e,i=t.target;if(i)return Object(r.a)(i,t)}return null}},miXs:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/drag-i",function(){return t("9Hn9")}])},rkTo:function(e,n,t){"use strict";function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}t.d(n,"a",(function(){return a}));var a=function(){function e(e){var n=e.x,t=void 0===n?0:n,a=e.y,i=void 0===a?0:a;r(this,"x",0),r(this,"y",0),this.x=t,this.y=i}var n=e.prototype;return n.value=function(){return{x:this.x,y:this.y}},n.toArray=function(){return[this.x,this.y]},e}()},w3y7:function(e,n,t){"use strict";t.d(n,"a",(function(){return p}));var r=t("yFcC"),a=t.n(r),i=t("ERkP"),o=t.n(i),s=t("D+es"),c=t("Cf/J"),d=t("cJAf");var u=function(e){var n=e.width,t=e.height;return new Array(n<360?40:185).fill(1).map((function(e,r){var a=25-20*Math.random();return{id:"".concat(r),radius:a,x:Math.round(Math.random()*(n-2*a)+a),y:Math.round(Math.random()*(t-2*a)+a)}}))},f=u;try{u.displayName="generateCircles",u.__docgenInfo={description:"",displayName:"generateCircles",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}}}},"undefined"!==typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/sandboxes/visx-drag-i/generateCircles.ts#generateCircles"]={docgenInfo:u.__docgenInfo,name:"generateCircles",path:"src/sandboxes/visx-drag-i/generateCircles.ts#generateCircles"})}catch(h){}var l=o.a.createElement,g=["#025aac","#02cff9","#02efff","#03aeed","#0384d7","#edfdff","#ab31ff","#5924d7","#d145ff","#1a02b1","#e582ff","#ff00d4","#270eff","#827ce2"];function p(e){var n=e.width,t=e.height,r=Object(i.useState)([]),o=r[0],u=r[1];Object(i.useEffect)((function(){n>10&&t>10&&u(f({width:n,height:t}))}),[n,t]);var p=Object(i.useMemo)((function(){return Object(s.a)({range:g,domain:o.map((function(e){return e.id}))})}),[n,t]);return 0===o.length||n<10?null:l("div",{style:{touchAction:"none"},className:"jsx-856181217 Drag"},l("svg",{width:n,height:t,className:"jsx-856181217"},l(c.a,{id:"stroke",from:"#ff00a5",to:"#ffc500"}),l("rect",{fill:"#c4c3cb",width:n,height:t,rx:14,className:"jsx-856181217"}),o.map((function(e,r){return l(d.a,{key:"".concat(e.id),width:n,height:t,onDragStart:function(){u(function(e,n){var t=[].concat(e),r=t.length-1,a=t.splice(n,1)[0];return t.splice(r,0,a),t}(o,r))}},(function(n){var t=n.dragStart,r=n.dragEnd,a=n.dragMove,i=n.isDragging,o=n.dx,s=n.dy;return l("circle",{key:"dot-".concat(e.id),cx:e.x,cy:e.y,r:i?e.radius+4:e.radius,fill:i?"url(#stroke)":p(e.id),transform:"translate(".concat(o,", ").concat(s,")"),fillOpacity:.9,stroke:i?"white":"transparent",strokeWidth:2,onMouseMove:a,onMouseUp:r,onMouseDown:t,onTouchStart:t,onTouchMove:a,onTouchEnd:r,className:"jsx-856181217"})}))}))),l("div",{className:"jsx-856181217 deets"},l("div",{className:"jsx-856181217"},"Based on Mike Bostock's"," ",l("a",{href:"https://bl.ocks.org/mbostock/c206c20294258c18832ff80d8fd395c3",className:"jsx-856181217"},"Circle Dragging II"))),l(a.a,{id:"856181217"},[".Drag.jsx-856181217{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}","svg.jsx-856181217{margin:1rem 0;}",".deets.jsx-856181217{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;font-size:12px;}",".deets.jsx-856181217>div.jsx-856181217{margin:0.25rem;}"]))}try{Example.displayName="Example",Example.__docgenInfo={description:"",displayName:"Example",props:{width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}}}},"undefined"!==typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/sandboxes/visx-drag-i/Example.tsx#Example"]={docgenInfo:Example.__docgenInfo,name:"Example",path:"src/sandboxes/visx-drag-i/Example.tsx#Example"})}catch(h){}},wEgr:function(e){e.exports=JSON.parse('{"name":"@visx/demo-drag-i","description":"Standalone visx drag demo.","main":"index.tsx","private":true,"dependencies":{"@babel/runtime":"^7.8.4","@types/react":"^16","@types/react-dom":"^16","@visx/drag":"latest","@visx/gradient":"latest","@visx/responsive":"latest","@visx/scale":"latest","react":"^16","react-dom":"^16","react-scripts-ts":"3.1.0","typescript":"^3"},"keywords":["visualization","d3","react","visx","drag"]}')}},[["miXs",0,2,1,3,4,6]]]);